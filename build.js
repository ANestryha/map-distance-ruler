System.registerDynamic("npm:core-js@1.2.7/library/modules/$.global.js",[],!0,function(a,b,c){var d=this||self,d=c.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();return"number"==typeof __g&&(__g=d),c.exports}),System.registerDynamic("npm:core-js@1.2.7/library/modules/$.a-function.js",[],!0,function(a,b,c){this||self;return c.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a},c.exports}),System.registerDynamic("npm:core-js@1.2.7/library/modules/$.ctx.js",["npm:core-js@1.2.7/library/modules/$.a-function.js"],!0,function(a,b,c){var d=(this||self,a("npm:core-js@1.2.7/library/modules/$.a-function.js"));return c.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}},c.exports}),System.registerDynamic("npm:core-js@1.2.7/library/modules/$.export.js",["npm:core-js@1.2.7/library/modules/$.global.js","npm:core-js@1.2.7/library/modules/$.core.js","npm:core-js@1.2.7/library/modules/$.ctx.js"],!0,function(a,b,c){var d=this||self,d=a("npm:core-js@1.2.7/library/modules/$.global.js"),e=a("npm:core-js@1.2.7/library/modules/$.core.js"),f=a("npm:core-js@1.2.7/library/modules/$.ctx.js"),g="prototype",h=function(a,b,c){var i,j,k,l=a&h.F,m=a&h.G,n=a&h.S,o=a&h.P,p=a&h.B,q=a&h.W,r=m?e:e[b]||(e[b]={}),s=m?d:n?d[b]:(d[b]||{})[g];m&&(c=b);for(i in c)j=!l&&s&&i in s,j&&i in r||(k=j?s[i]:c[i],r[i]=m&&"function"!=typeof s[i]?c[i]:p&&j?f(k,d):q&&s[i]==k?function(a){var b=function(b){return this instanceof a?new a(b):a(b)};return b[g]=a[g],b}(k):o&&"function"==typeof k?f(Function.call,k):k,o&&((r[g]||(r[g]={}))[i]=k))};return h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,c.exports=h,c.exports}),System.registerDynamic("npm:core-js@1.2.7/library/modules/$.js",[],!0,function(a,b,c){var d=(this||self,Object);return c.exports={create:d.create,getProto:d.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:d.getOwnPropertyDescriptor,setDesc:d.defineProperty,setDescs:d.defineProperties,getKeys:d.keys,getNames:d.getOwnPropertyNames,getSymbols:d.getOwnPropertySymbols,each:[].forEach},c.exports}),System.registerDynamic("npm:core-js@1.2.7/library/modules/$.defined.js",[],!0,function(a,b,c){this||self;return c.exports=function(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a},c.exports}),System.registerDynamic("npm:core-js@1.2.7/library/modules/$.to-object.js",["npm:core-js@1.2.7/library/modules/$.defined.js"],!0,function(a,b,c){var d=(this||self,a("npm:core-js@1.2.7/library/modules/$.defined.js"));return c.exports=function(a){return Object(d(a))},c.exports}),System.registerDynamic("npm:core-js@1.2.7/library/modules/$.cof.js",[],!0,function(a,b,c){var d=(this||self,{}.toString);return c.exports=function(a){return d.call(a).slice(8,-1)},c.exports}),System.registerDynamic("npm:core-js@1.2.7/library/modules/$.iobject.js",["npm:core-js@1.2.7/library/modules/$.cof.js"],!0,function(a,b,c){var d=(this||self,a("npm:core-js@1.2.7/library/modules/$.cof.js"));return c.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return"String"==d(a)?a.split(""):Object(a)},c.exports}),System.registerDynamic("npm:core-js@1.2.7/library/modules/$.fails.js",[],!0,function(a,b,c){this||self;return c.exports=function(a){try{return!!a()}catch(a){return!0}},c.exports}),System.registerDynamic("npm:core-js@1.2.7/library/modules/$.object-assign.js",["npm:core-js@1.2.7/library/modules/$.js","npm:core-js@1.2.7/library/modules/$.to-object.js","npm:core-js@1.2.7/library/modules/$.iobject.js","npm:core-js@1.2.7/library/modules/$.fails.js"],!0,function(a,b,c){var d=(this||self,a("npm:core-js@1.2.7/library/modules/$.js")),e=a("npm:core-js@1.2.7/library/modules/$.to-object.js"),f=a("npm:core-js@1.2.7/library/modules/$.iobject.js");return c.exports=a("npm:core-js@1.2.7/library/modules/$.fails.js")(function(){var a=Object.assign,b={},c={},d=Symbol(),e="abcdefghijklmnopqrst";return b[d]=7,e.split("").forEach(function(a){c[a]=a}),7!=a({},b)[d]||Object.keys(a({},c)).join("")!=e})?function(a,b){for(var c=e(a),g=arguments,h=g.length,i=1,j=d.getKeys,k=d.getSymbols,l=d.isEnum;h>i;)for(var m,n=f(g[i++]),o=k?j(n).concat(k(n)):j(n),p=o.length,q=0;p>q;)l.call(n,m=o[q++])&&(c[m]=n[m]);return c}:Object.assign,c.exports}),System.registerDynamic("npm:core-js@1.2.7/library/modules/es6.object.assign.js",["npm:core-js@1.2.7/library/modules/$.export.js","npm:core-js@1.2.7/library/modules/$.object-assign.js"],!0,function(a,b,c){var d=(this||self,a("npm:core-js@1.2.7/library/modules/$.export.js"));return d(d.S+d.F,"Object",{assign:a("npm:core-js@1.2.7/library/modules/$.object-assign.js")}),c.exports}),System.registerDynamic("npm:core-js@1.2.7/library/modules/$.core.js",[],!0,function(a,b,c){var d=(this||self,c.exports={version:"1.2.6"});return"number"==typeof __e&&(__e=d),c.exports}),System.registerDynamic("npm:core-js@1.2.7/library/fn/object/assign.js",["npm:core-js@1.2.7/library/modules/es6.object.assign.js","npm:core-js@1.2.7/library/modules/$.core.js"],!0,function(a,b,c){this||self;return a("npm:core-js@1.2.7/library/modules/es6.object.assign.js"),c.exports=a("npm:core-js@1.2.7/library/modules/$.core.js").Object.assign,c.exports}),System.registerDynamic("npm:babel-runtime@5.8.38/core-js/object/assign.js",["npm:core-js@1.2.7/library/fn/object/assign.js"],!0,function(a,b,c){this||self;return c.exports={default:a("npm:core-js@1.2.7/library/fn/object/assign.js"),__esModule:!0},c.exports}),System.register("lib/app/linked-list.js",[],function(a){"use strict";var b,c;return{setters:[],execute:function(){b=function a(b){var a=[];return b.each(function(b){a.push(b._position)}),a},c=L.Class.extend({data:null,next:null,prev:null,initialize:function(a){this.data=a},index:0}),a("default",L.Class.extend({_length:0,_head:null,_tail:null,_hash:{},_count:0,add:function(a){var b=new c(a);return 0==this._length?(this._head=b,this._tail=b):(this._tail.next=b,b.prev=this._tail,this._tail=b),this._length++,b.index=this._count,this._hash[this._count]=b,this._count++,this.resetPositions(),b},insertAfter:function(a,b){var c=this._head;if(!(0==this._length||b>this._length||b<0)&&null!==c){var d=this.get(b),e=this.get(b+1),f=this.add(a);return this._tail=f.prev,d.next=f,e.prev=f,f.prev=d,f.next=e,f}},get:function(a){var b=this._head,d=this._length,e=0;if(0===d||a<0||a>d)return new c;for(;e<a;)b=b.next,e++;return b},getLast:function(){return this.get(this._length-1)},getFirst:function(){return this.get(0)},remove:function(a){if(a>-1&&a<this._length){var b=this._head,c=0;if(0===a)this._head=b.next,this._head?this._head.prev=null:this._tail=null;else if(a===this._length-1)b=this._tail,this._tail=b.prev,this._tail.next=null;else{for(;c++<a;)b=b.next;b.prev.next=b.next,b.next.prev=b.prev}return this._length--,delete this._hash[b.index],this.resetPositions(),b.data}return null},isEmpty:function(){return 0===this._length},each:function(a){for(var b=this._head;null!==b;)null!==b&&a.call(this,b),b=b.next},resetPositions:function(){var a=0;this.each(function(b){b._position=a++})},_beforeClear:function(){},clear:function(){this._beforeClear(),this._length=0,this._head=null,this._tail=null,this._hash={},this._count=0}}))}}}),System.register("lib/app/div-icon.js",[],function(a){"use strict";return{setters:[],execute:function(){a("default",L.DivIcon.extend({options:{className:"ruler-icon",iconSize:new L.Point(10,10)}}))}}}),System.register("lib/app/ruler-view.js",["npm:babel-runtime@5.8.38/core-js/object/assign.js","lib/app/linked-list.js","lib/app/div-icon.js"],function(a){var b,c,d,e;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default}],execute:function(){"use strict";e=L.Polyline.extend({options:{color:"black",weight:2,clickable:!0}}),a("default",L.Class.extend({initialize:function(a){this._map=a,this._map.__dr._options._updateTooltipDistance&&(this._updateTooltipDistance=this._map.__dr._options._updateTooltipDistance),this._map.__dr._options._createTooltip&&(this._createTooltip=this._map.__dr._options._createTooltip),this.rulerOptions=this._map.__dr._options},_layerPaintPath:null,markers:[],_hoverMarker:null,addMarker:function(a){var b=L.marker(a,{icon:new d(this.rulerOptions.iconOptions),draggable:!1,position:this.hash._length}).addTo(this._layerPaint);return b.on("click",function(){}),b.node=this.hash.add(b),this.markers.push(b),b},removeMarker:function(a){var b=a.node._position;this._layerPaintPath.spliceLatLngs(b,1),this.hash.remove(b),this.hash.resetPositions(),this._layerPaint.removeLayer(a),this.markers.splice(b,1)},addHoverMarker:function(a){a.target._map.__dr.view._hoverMarker=L.marker(a.latlng,{icon:new d(a.target._map.__dr.view.rulerOptions.iconOptions),draggable:!1,position:a.target._map.__dr.view.hash._length}).addTo(a.target._map.__dr.view._layerPaint);var b=a.target._map.__dr.view._map;b.on("mousemove.line",function(a){a.target._map.__dr.view._hoverMarker.setLatLng(a.latlng)})},removeHoverMarker:function(a){console.log("removeHoverMarker",a.target),a.target._map.__dr.view._layerPaint.removeLayer(a.target._map.__dr.view._hoverMarker),a.target._map.__dr.view._map.off("mousemove.line")},redrawHoverMarker:function(a){this._hoverMarker.setLatLng(a.latlng)},insertAfter:function(a){this._layerPaintPath.spliceLatLngs(pos,0,a._latlng),this.hash.add(a),this.markers.splice(pos,0,a)},get:function(){},getLast:function(){},getFirst:function(){},clear:function(){},_onDragMarker:function(a){a.target._map.__dr.view._layerPaintPath.spliceLatLngs(a.target.node._position,1,a.target._latlng)},_onClickMarker:function(a){var b=a.target,c=b._map.__dr.view;c.removeMarker(b)},__enabled:!1,_toggleMeasure:function(){this.__enabled=!this.__enabled,this.__enabled?this._startMeasuring():this._stopMeasuring()},_startMeasuring:function(){this._oldCursor=this._map._container.style.cursor,this._map._container.style.cursor="crosshair",this._doubleClickZoom=this._map.doubleClickZoom.enabled(),this._map.doubleClickZoom.disable(),L.DomEvent.on(this._map,"mousemove",this._mouseMove,this).on(this._map,"click",this._mouseClick,this).on(document,"keydown",this._onKeyDown,this),this._layerPaint||(this._layerPaint=L.layerGroup().addTo(this._map)),this._points||(this._points=[])},_stopMeasuring:function(){this._map._container.style.cursor=this._oldCursor,L.DomEvent.off(document,"keydown",this._onKeyDown,this).off(this._map,"mousemove",this._mouseMove,this).off(this._map,"click",this._mouseClick,this).off(this._map,"dblclick",this._mouseClick,this),this._doubleClickZoom&&this._map.doubleClickZoom.enable(),this._layerPaint&&this._layerPaint.clearLayers(),this._restartPath()},_mouseMove:function(a){if(a.latlng&&this._lastPoint&&this.rulerOptions.paintLineOptions&&(this._layerPaintPathTemp?this._layerPaintPathTemp.spliceLatLngs(0,2,this._lastPoint,a.latlng):this._layerPaintPathTemp=L.polyline([this._lastPoint,a.latlng],b({color:"black",weight:1.5,clickable:!1,dashArray:"6,3"},this.rulerOptions.paintLineOptions)).addTo(this._layerPaint),this._tooltip)){this._distance||(this._distance=0),this._updateTooltipPosition(a.latlng);var c=a.latlng.distanceTo(this._lastPoint);this._updateTooltipDistance(this._tooltip,this._distance+c,c)}},_mouseClick:function(a){if(a.latlng){if(this._lastPoint&&this._tooltip){this._distance||(this._distance=0),this._updateTooltipPosition(a.latlng);var b=a.latlng.distanceTo(this._lastPoint);this._updateTooltipDistance(this._tooltip,this._distance+b,b),this._distance+=b}this.addMarker(a.latlng,this._tooltip),this._createTooltip.call(this,a.latlng),this._lastPoint&&!this._layerPaintPath&&(this._layerPaintPath=new e([this._lastPoint],this.rulerOptions.lineOptions).addTo(this._layerPaint),this._layerPaintPath.on("click",this._onClickLine)),this._layerPaintPath&&this._layerPaintPath.addLatLng(a.latlng),this._lastPoint=a.latlng}},_onClickLine:function(){},_finishPath:function(){this._lastCircle&&this._layerPaint.removeLayer(this._lastCircle),this._tooltip&&this._layerPaint.removeLayer(this._tooltip),this._layerPaint&&this._layerPaintPathTemp&&this._layerPaint.removeLayer(this._layerPaintPathTemp),this._restartPath()},_restartPath:function(){this._distance=0,this._tooltip=void 0,this._lastCircle=void 0,this._lastPoint=void 0,this._layerPaintPath=void 0,this._layerPaintPathTemp=void 0},_createTooltip:function(a){var b=L.divIcon({className:"ruler-tooltip",iconAnchor:[-5,-5]});this._tooltip=L.marker(a,{icon:b,clickable:!1}).addTo(this._layerPaint)},_updateTooltipPosition:function(a){this._tooltip.setLatLng(a)},_updateTooltipDistance:function(a,b,c){var d=b,e=c,f='<div class="ruler-tooltip-total">'+d+" m</div>";e>0&&d!=e&&(f+='<div class="ruler-tooltip-difference">(+'+e+" m)</div>"),a._icon.innerHTML=f},_onKeyDown:function(a){27==a.keyCode&&(this._lastPoint?this._finishPath():this._toggleMeasure())},hash:new c}))}}}),System.register("lib/app/ruler-options.js",[],function(a){"use strict";return{setters:[],execute:function(){a("default",{renderRuler:null,iconOptions:{draggable:!0},lastNodeOptions:{},lineOptions:{},paintLineOptions:!1})}}}),System.register("lib/app.js",["npm:babel-runtime@5.8.38/core-js/object/assign.js","lib/app/ruler-view.js","lib/app/ruler-options.js"],function(a){var b,c,d;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default}],execute:function(){"use strict";L.MapDistanceRuler=L.Class.extend({baseOptions:d,initialize:function(a){this._options=b({},this.baseOptions,a)},onAdd:function(a){this._map=a,this._map.__dr=this,this.view=new c(this._map)},onRemove:function(a){},view:null}),L.mapDistanceRuler=function(a){return new L.MapDistanceRuler(a)}}}});
//# sourceMappingURL=build.js.map